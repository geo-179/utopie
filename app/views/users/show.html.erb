<main class="background-purple py-5">

<%# Div for user profile information %>
  <div class="d-flex px-5 pb-5">
    <%# Div for avatar, name, link %>
    <div class="d-flex flex-column align-items-start col-4 p-5">
      <%= cl_image_tag @user.photo.key, crop: :fill, class: "avatar mb-3 w-50", alt: "avatar" %>
      <p class="fw-bolder"><%= @user.nickname %></p>
      <p><%= @user.email %></p>
      <% if policy(@user).edit? %>
        <%= link_to edit_user_registration_path(@user), class: "button" do%>
          <button class="btn btn-warning">Edit Profile</button>
        <% end %>
      <% end %>
    </div>
    <%# Div for bio %>
    <div class="col-8 d-flex flex-column justify-content-center p-4">
      <h4>Bio</h4>
      <%= @user.bio %>
    </div>
  </div>

<%# Div for user created posts %>
  <div class="background-green p-5">
    <p class="fw-bolder px-5">Posts</p>
      <button class="btn btn-deep-orange rounded-pill">post</button>
      <button class="btn btn-warning rounded-pill">post</button>
      <button class="btn btn-warning rounded-pill">post</button>
      <button class="btn btn-warning rounded-pill">post</button>

    <%# grid for post cards %>
    <div class="user-show-cards px-5 py-3">
      <% @user.posts.each do |post| %>
        <%= link_to post_path(post) do %>
          <div class="user-show-card">
            <p class="title-purple"><%= post.title %></p>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>

<%# Div for user saved posts %>

  <div class="p-5">
    <p class="fw-bolder px-5">Bookmarks</p>
    <%# Grid for bookmarked post cards %>
    <div class="px-5 bookmarked-post-cards">
      <% if @user.bookmarks.count > 0 %>
      <% @user.bookmarks.each do |bookmark| %>
        <%= link_to post_path(bookmark.post) do %>
          <div class="bookmarked-post-card">
            <p class="title-black"><%= bookmark.post.title %></p>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <div>
        <p>You have no bookmarks</p>
      </div>
    <% end %>
    </div>
  </div>

  <%# Div for contribution activity %>
  <div class="p-5">
    <p class="fw-bolder px-5">Contribution Activity</p>

    <% @contributions.each do |month, value| %>
      <div class="px-5">
        <div class="d-flex align-items-center">
          <div class="month-card">
            <p class="month-card-month mb-0 me-2"><%= month %></p>
          </div>
          <div class="border-top border-black flex-grow-1">
          </div>
        </div>
        <div class="d-flex border-start border-black mt-2">
          <div class="month-stat-info pt-2 ps-5">
            <div class="d-flex">
              <i class="fa-solid fa-star pe-2" style="color: #d9d9d9;"></i>
              <% if value[0].nil? %>
                <p>Created 0 posts</p>
              <% elsif value[0] == 1 %>
                <p>Created 1 post</p>
              <% else %>
                <p>Created <%= value[0] %> posts</p>
              <% end %>
            </div>
            <div class="d-flex">
              <i class="fa-solid fa-star pe-2" style="color: #d9d9d9;"></i>
              <% if value[1].nil? %>
                <p>Bookmarked 0 posts</p>
              <% elsif value[1] == 1 %>
                <p>Bookmarked 1 post</p>
              <% else %>
                <p>Bookmarked <%= value[1] %> posts</p>
              <% end %>
            </div>
            <div class="d-flex">
              <i class="fa-solid fa-star pe-2" style="color: #d9d9d9;"></i>
              <% if value[2].nil? %>
                <p>Wrote 0 comments</p>
              <% elsif value[2] == 1 %>
                <p>Wrote 1 comment</p>
              <% else %>
                <p>Wrote <%= value[2] %> comments</p>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>

  </div>
</main>
